<project name="AbcLinuxu" basedir="." default="compile">
  <property name="src" value="src"/>
  <property name="build" value="build"/>
  <property name="tomcat" value="../tomcat"/>
  <property name="deploy" value="${tomcat}/webapps/ROOT"/>

  <path id="project.classpath">
    <fileset dir="libs">
      <include name="*.jar"/>
    </fileset>
    <fileset dir="${tomcat}/common/lib">
      <include name="activation.jar"/>
      <include name="mail.jar"/>
    </fileset>
  </path>


  <target name="init">
    <mkdir dir="${build}"/>
    <mkdir dir="${build}/WEB-INF"/>
    <mkdir dir="${build}/WEB-INF/lib"/>
    <mkdir dir="${build}/WEB-INF/classes"/>
    <mkdir dir="${build}/logs"/>
    <mkdir dir="${deploy}"/>
    <tstamp/>
  </target>


  <target name="compile" depends="init">
    <javac srcdir="${src}" destdir="${build}/WEB-INF/classes" classpathref="project.classpath"/>
    <javac srcdir="test" destdir="${build}/WEB-INF/classes" classpathref="project.classpath"/>
  </target>


  <target name="dist" depends="compile">
    <copy todir="${build}">
      <fileset dir="web/velocity"/>
    </copy>

    <copy todir="${build}/ikony">
      <fileset dir="web/ikony"/>
    </copy>

    <copy todir="${build}/images">
      <fileset dir="web/images"/>
    </copy>

    <copy todir="${build}/WEB-INF">
      <fileset dir="conf">
        <include name="web.xml"/>
        <include name="log4j.xml"/>
        <include name="velocity.properties"/>
        <include name="macros.vm"/>
      </fileset>
    </copy>

    <copy todir="${build}/WEB-INF/lib">
      <fileset dir="libs" includes="*.jar" excludes="servlet.jar"/>
    </copy>
  </target>


  <target name="deploy" depends="dist">
    <copy todir="${deploy}">
      <fileset dir="${build}"/>
    </copy>
  </target>

  <target name="transfer">
    <zip zipfile="/home/literakl/src_abc.zip">
      <zipfileset dir="src" prefix="abc/src/" />
      <zipfileset dir="web" prefix="abc/web/" />
      <zipfileset dir="test" prefix="abc/test/" />
      <zipfileset dir="conf" prefix="abc/conf/" />
      <zipfileset dir="bin" prefix="abc/bin/" />
      <zipfileset dir="." includes="build.xml" fullpath="abc/build.xml" />
    </zip>
  </target>
</project>